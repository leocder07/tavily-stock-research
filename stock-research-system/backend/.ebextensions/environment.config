option_settings:
  aws:elasticbeanstalk:application:environment:
    # Application settings
    ENVIRONMENT: production
    DEBUG: false
    CORS_ORIGINS: "https://stock-research.example.com"

    # API Keys (use AWS Secrets Manager in production)
    OPENAI_API_KEY: ${OPENAI_API_KEY}
    TAVILY_API_KEY: ${TAVILY_API_KEY}

    # MongoDB Atlas
    MONGODB_URI: ${MONGODB_URI}
    DATABASE_NAME: stock_research_prod

    # Redis Cache
    REDIS_HOST: ${REDIS_HOST}
    REDIS_PORT: 6379

    # Security
    SECRET_KEY: ${SECRET_KEY}
    JWT_SECRET_KEY: ${JWT_SECRET_KEY}
    JWT_ALGORITHM: HS256
    ACCESS_TOKEN_EXPIRE_MINUTES: 30

    # Performance
    MAX_WORKERS: 4
    WORKER_TIMEOUT: 120
    MAX_REQUESTS: 1000
    MAX_REQUESTS_JITTER: 50

  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    EnhancedHealthAuthEnabled: true

  aws:elasticbeanstalk:cloudwatch:logs:
    StreamLogs: true
    DeleteOnTerminate: false
    RetentionInDays: 30

  aws:elasticbeanstalk:environment:proxy:
    GzipCompression: true
    ProxyServer: nginx

  aws:autoscaling:asg:
    MinSize: 2
    MaxSize: 10

  aws:autoscaling:trigger:
    MeasureName: CPUUtilization
    Statistic: Average
    Unit: Percent
    UpperThreshold: 75
    LowerThreshold: 25
    UpperBreachScaleIncrement: 2
    LowerBreachScaleIncrement: -1
    BreachDuration: 5
    EvaluationPeriods: 2
    Period: 5

  aws:elasticbeanstalk:managedactions:
    ManagedActionsEnabled: true
    PreferredStartTime: "TUE:03:00"

  aws:elasticbeanstalk:managedactions:platformupdate:
    UpdateLevel: minor
    InstanceRefreshEnabled: true
option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: backend.main:app
  aws:elasticbeanstalk:application:environment:
    PYTHONPATH: "/var/app/current:$PYTHONPATH"
    PORT: "8000"
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: frontend/build/static
    /: frontend/build

container_commands:
  01_install_dependencies:
    command: "pip install -r backend/requirements.txt"
  02_build_frontend:
    command: "cd frontend && npm install && npm run build"
  03_collectstatic:
    command: "cp -r frontend/build/* /var/app/current/static/"
    leader_only: true